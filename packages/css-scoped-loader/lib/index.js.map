{"version":3,"sources":["../../../node_modules/.pnpm/tsup@5.11.13_typescript@4.5.5/node_modules/tsup/assets/cjs_shims.js","../../../node_modules/.pnpm/hash-sum@2.0.0/node_modules/hash-sum/hash-sum.js","../src/index.ts","../src/postcss-css-scoped.ts"],"sourcesContent":["// Shim globals in cjs bundle\n// There's a weird bug that esbuild will always inject importMetaUrl\n// if we export it as `const importMetaUrl = ... __filename ...`\n// But using a function will not cause this issue\n\nconst getImportMetaUrl = () =>\n  typeof document === 'undefined'\n    ? new URL('file:' + __filename).href\n    : (document.currentScript && document.currentScript.src) ||\n      new URL('main.js', document.baseURI).href\n\nexport const importMetaUrl = /* @__PURE__ */ getImportMetaUrl()\n","'use strict';\n\nfunction pad (hash, len) {\n  while (hash.length < len) {\n    hash = '0' + hash;\n  }\n  return hash;\n}\n\nfunction fold (hash, text) {\n  var i;\n  var chr;\n  var len;\n  if (text.length === 0) {\n    return hash;\n  }\n  for (i = 0, len = text.length; i < len; i++) {\n    chr = text.charCodeAt(i);\n    hash = ((hash << 5) - hash) + chr;\n    hash |= 0;\n  }\n  return hash < 0 ? hash * -2 : hash;\n}\n\nfunction foldObject (hash, o, seen) {\n  return Object.keys(o).sort().reduce(foldKey, hash);\n  function foldKey (hash, key) {\n    return foldValue(hash, o[key], key, seen);\n  }\n}\n\nfunction foldValue (input, value, key, seen) {\n  var hash = fold(fold(fold(input, key), toString(value)), typeof value);\n  if (value === null) {\n    return fold(hash, 'null');\n  }\n  if (value === undefined) {\n    return fold(hash, 'undefined');\n  }\n  if (typeof value === 'object' || typeof value === 'function') {\n    if (seen.indexOf(value) !== -1) {\n      return fold(hash, '[Circular]' + key);\n    }\n    seen.push(value);\n\n    var objHash = foldObject(hash, value, seen)\n\n    if (!('valueOf' in value) || typeof value.valueOf !== 'function') {\n      return objHash;\n    }\n\n    try {\n      return fold(objHash, String(value.valueOf()))\n    } catch (err) {\n      return fold(objHash, '[valueOf exception]' + (err.stack || err.message))\n    }\n  }\n  return fold(hash, value.toString());\n}\n\nfunction toString (o) {\n  return Object.prototype.toString.call(o);\n}\n\nfunction sum (o) {\n  return pad(foldValue(0, o, '', []).toString(16), 8);\n}\n\nmodule.exports = sum;\n","import hash from 'hash-sum'\nimport postcss from 'postcss'\nimport postcssCssScoped from './postcss-css-scoped'\n\nexport default function cssLoader(source) {\n  const id = hash(this.resourcePath)\n  const { css } = postcss([postcssCssScoped(id)]).process(source)\n  return css\n}\n","import type { AttributeOptions, Selector } from 'postcss-selector-parser'\nimport selectorParser from 'postcss-selector-parser'\n\nconst plugin = (id: string) => {\n  return {\n    postcssPlugin: 'postcss-css-scoped',\n    Once(root) {\n      root.each((node) => {\n        if (!node.selector) {\n          return\n        }\n\n        node.selector = selectorParser((selectors) => {\n          selectors.each((selector: Selector) => {\n            let node: any = null\n            selector.each((n: any) => {\n              if (n.type === 'pseudo' && n.value === '::global') {\n                n.value = n.spaces.before = n.spaces.after = ''\n                return false\n              }\n              if (n.type !== 'pseudo' && n.type !== 'combinator') {\n                node = n\n              }\n            })\n            selector.insertAfter(\n              node,\n              selectorParser.attribute({\n                attribute: `data-scope-${id}`,\n              } as AttributeOptions)\n            )\n          })\n        }).processSync(node.selector)\n      })\n    },\n  }\n}\nplugin.postcss = true\nexport default plugin\n"],"mappings":"kxBAAA,gBCAA,iCAEA,WAAc,EAAM,EAAK,CACvB,KAAO,EAAK,OAAS,GACnB,EAAO,IAAM,EAEf,MAAO,EACT,CAEA,WAAe,EAAM,EAAM,CACzB,GAAI,GACA,EACA,EACJ,GAAI,EAAK,SAAW,EAClB,MAAO,GAET,IAAK,EAAI,EAAG,EAAM,EAAK,OAAQ,EAAI,EAAK,IACtC,EAAM,EAAK,WAAW,CAAC,EACvB,EAAS,IAAQ,GAAK,EAAQ,EAC9B,GAAQ,EAEV,MAAO,GAAO,EAAI,EAAO,GAAK,CAChC,CAEA,WAAqB,EAAM,EAAG,EAAM,CAClC,MAAO,QAAO,KAAK,CAAC,EAAE,KAAK,EAAE,OAAO,EAAS,CAAI,EACjD,WAAkB,EAAM,EAAK,CAC3B,MAAO,GAAU,EAAM,EAAE,GAAM,EAAK,CAAI,CAC1C,CACF,CAEA,WAAoB,EAAO,EAAO,EAAK,EAAM,CAC3C,GAAI,GAAO,EAAK,EAAK,EAAK,EAAO,CAAG,EAAG,EAAS,CAAK,CAAC,EAAG,MAAO,EAAK,EACrE,GAAI,IAAU,KACZ,MAAO,GAAK,EAAM,MAAM,EAE1B,GAAI,IAAU,OACZ,MAAO,GAAK,EAAM,WAAW,EAE/B,GAAI,MAAO,IAAU,UAAY,MAAO,IAAU,WAAY,CAC5D,GAAI,EAAK,QAAQ,CAAK,IAAM,GAC1B,MAAO,GAAK,EAAM,aAAe,CAAG,EAEtC,EAAK,KAAK,CAAK,EAEf,GAAI,GAAU,EAAW,EAAM,EAAO,CAAI,EAE1C,GAAI,CAAE,YAAa,KAAU,MAAO,GAAM,SAAY,WACpD,MAAO,GAGT,GAAI,CACF,MAAO,GAAK,EAAS,OAAO,EAAM,QAAQ,CAAC,CAAC,CAC9C,OAAS,EAAP,CACA,MAAO,GAAK,EAAS,sBAAyB,GAAI,OAAS,EAAI,QAAQ,CACzE,CACF,CACA,MAAO,GAAK,EAAM,EAAM,SAAS,CAAC,CACpC,CAEA,WAAmB,EAAG,CACpB,MAAO,QAAO,UAAU,SAAS,KAAK,CAAC,CACzC,CAEA,WAAc,EAAG,CACf,MAAO,GAAI,EAAU,EAAG,EAAG,GAAI,CAAC,CAAC,EAAE,SAAS,EAAE,EAAG,CAAC,CACpD,CAEA,EAAO,QAAU,ICpEjB,wCAAiB,OACjB,EAAoB,sBCDpB,IACA,MAA2B,sCAErB,EAAS,AAAC,GACP,EACL,cAAe,qBACf,KAAK,EAAM,CACT,EAAK,KAAK,AAAC,GAAS,CAClB,AAAI,CAAC,EAAK,UAIV,GAAK,SAAW,cAAe,AAAC,GAAc,CAC5C,EAAU,KAAK,AAAC,GAAuB,CACrC,GAAI,GAAY,KAChB,EAAS,KAAK,AAAC,GAAW,CACxB,GAAI,EAAE,OAAS,UAAY,EAAE,QAAU,WACrC,SAAE,MAAQ,EAAE,OAAO,OAAS,EAAE,OAAO,MAAQ,GACtC,GAET,AAAI,EAAE,OAAS,UAAY,EAAE,OAAS,cACpC,GAAO,EAEX,CAAC,EACD,EAAS,YACP,EACA,UAAe,UAAU,CACvB,UAAW,cAAc,GAC3B,CAAqB,CACvB,CACF,CAAC,CACH,CAAC,EAAE,YAAY,EAAK,QAAQ,EAC9B,CAAC,CACH,CACF,GAEF,EAAO,QAAU,GACjB,GAAO,GAAQ,EDjCA,WAAmB,EAAQ,CACxC,GAAM,GAAK,cAAK,KAAK,YAAY,EAC3B,CAAE,OAAQ,cAAQ,CAAC,EAAiB,CAAE,CAAC,CAAC,EAAE,QAAQ,CAAM,EAC9D,MAAO,EACT","names":[]}